"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41],{10964:(e,s,t)=>{t.d(s,{$m:()=>o,As:()=>d,nD:()=>c,ub:()=>m});var r=t(90702),a=t(16606),n=t(19278),l=t(50738),i=t(79321);let c=n.bL,d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.q7,{ref:s,className:(0,i.cn)("border-b",t),...a})});d.displayName="AccordionItem";let o=a.forwardRef((e,s)=>{let{className:t,children:a,...c}=e;return(0,r.jsx)(n.Y9,{className:"flex",children:(0,r.jsxs)(n.l9,{ref:s,className:(0,i.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...c,children:[a,(0,r.jsx)(l.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});o.displayName=n.l9.displayName;let m=a.forwardRef((e,s)=>{let{className:t,children:a,...l}=e;return(0,r.jsx)(n.UC,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,r.jsx)("div",{className:(0,i.cn)("pb-4 pt-0",t),children:a})})});m.displayName=n.UC.displayName},17059:(e,s,t)=>{t.d(s,{E:()=>i});var r=t(90702),a=t(13490),n=t(79321);let l=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:t}),s),...a})}},65619:(e,s,t)=>{t.d(s,{Bc:()=>i,ZI:()=>o,k$:()=>d,m_:()=>c});var r=t(90702),a=t(16606),n=t(68857),l=t(79321);let i=n.Kq,c=n.bL,d=n.l9,o=a.forwardRef((e,s)=>{let{className:t,sideOffset:a=4,...i}=e;return(0,r.jsx)(n.UC,{ref:s,sideOffset:a,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})});o.displayName=n.UC.displayName},71008:(e,s,t)=>{t.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>l,aR:()=>i,wL:()=>m});var r=t(90702),a=t(16606),n=t(79321);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});l.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent";let m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})});m.displayName="CardFooter"},82041:(e,s,t)=>{t.r(s),t.d(s,{default:()=>M});var r=t(90702),a=t(16606),n=t(71008),l=t(17059),i=t(10964),c=t(83994),d=t(5504),o=t(65619),m=t(43466),x=t(30260),u=t(786),p=t(42440),h=t(17376),f=t(85939),g=t(7433),j=t(33249),N=t(12626),b=t(76212),y=t(46590),w=t(49333),v=t(98322),_=t(24744),k=t(71224),A=t(20597),R=t(93388),C=t(75021),I=t(56572),S=t(64380),T=t(16441),Z=t(94753),E=t(73965),B=t(48375),q=t(86564),L=t(68972),z=t(23924),D=t(51211),F=t(37744),H=t(26661),$=t(88443),W=t(40283),O=t(58611);let U=e=>{var s;if(e)switch(null===(s=e.split(".").pop())||void 0===s?void 0:s.toLowerCase()){case"js":case"jsx":return"javascript";case"ts":case"tsx":return"typescript";case"py":return"python";case"java":return"java";case"kt":case"kts":return"kotlin";case"swift":return"swift";case"cpp":case"cxx":case"cc":case"hpp":case"hxx":case"hh":return"cpp";case"c":case"h":return"c";case"json":return"json";case"md":return"markdown";case"rb":return"ruby";case"go":return"go";case"php":return"php";case"html":return"html";case"css":return"css";case"sh":case"bash":return"bash";case"diff":return"diff";default:return}},P=e=>{let{reference:s,className:t}=e;if(!s)return null;let a=U(s.file_path);return(0,r.jsxs)("div",{className:"border rounded p-3 text-xs bg-gray-50/80 hover:bg-gray-100/50 transition-colors ".concat(t),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1.5",children:[(0,r.jsxs)("span",{className:"font-mono text-gray-700 flex items-center",children:[(0,r.jsx)(x.A,{className:"h-3 w-3 mr-1.5 flex-shrink-0"}),s.file_path,s.line_number&&":".concat(s.line_number)]}),s.url&&(0,r.jsx)("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)(m.$,{variant:"ghost",size:"icon",className:"h-5 w-5",children:(0,r.jsx)(u.A,{className:"h-3 w-3"})})})]}),s.component_name&&(0,r.jsxs)("p",{className:"italic text-gray-600 mb-1",children:["Component: ",s.component_name]}),s.code_snippet&&a&&(0,r.jsx)(F.A,{language:a,style:H.A,customStyle:{margin:0,fontSize:"0.7rem",padding:"0.25rem"},wrapLines:!0,children:s.code_snippet}),s.code_snippet&&!a&&(0,r.jsx)("pre",{className:"text-xs font-mono bg-white p-1 border rounded overflow-x-auto",children:s.code_snippet})]})},X=e=>{let{finding:s,title:t,confidence:a,defaultOpen:n=!1,icon:c}=e;return s?(0,r.jsx)(i.nD,{type:"single",collapsible:!0,className:"w-full mb-3 border rounded-md bg-white shadow-sm",defaultValue:n?"item-1":void 0,children:(0,r.jsxs)(i.As,{value:"item-1",className:"border-b-0",children:[(0,r.jsx)(i.$m,{className:"text-sm font-medium px-4 py-2.5 hover:bg-gray-50 hover:no-underline [&[data-state=open]]:bg-gray-50/80 rounded-t-md",children:(0,r.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[c&&(0,r.jsx)(c,{className:"h-4 w-4 mr-2 text-indigo-600 flex-shrink-0"}),t]}),a&&(0,r.jsxs)(l.E,{variant:"outline",className:"ml-2 text-xs px-1.5 py-0.5 ".concat((e=>{switch(e){case"High":return"text-green-700 border-green-300 bg-green-50";case"Medium":return"text-yellow-700 border-yellow-300 bg-yellow-50";case"Low":return"text-red-700 border-red-300 bg-red-50";default:return"text-gray-600 border-gray-300 bg-gray-50"}})(a)),children:["Confidence: ",a]})]})}),(0,r.jsxs)(i.ub,{className:"px-4 pb-4 pt-2 text-xs space-y-3",children:[(0,r.jsx)("p",{className:"font-semibold text-sm text-gray-800",children:s.summary}),s.details&&(0,r.jsx)("div",{className:"prose prose-sm max-w-none text-xs text-gray-700 leading-relaxed",children:(0,r.jsx)(D.oz,{children:s.details})}),s.code_reference&&(0,r.jsx)(P,{reference:s.code_reference,className:"mt-2"}),s.supporting_quotes&&s.supporting_quotes.length>0&&(0,r.jsxs)("div",{className:"mt-3 space-y-1.5",children:[(0,r.jsxs)("h4",{className:"text-xs font-medium text-gray-600 flex items-center",children:[(0,r.jsx)(p.A,{className:"h-3.5 w-3.5 mr-1.5 text-gray-400 flex-shrink-0"}),"Supporting Quotes:"]}),(0,r.jsx)("ul",{className:"list-none space-y-1 pl-2",children:s.supporting_quotes.map((e,s)=>(0,r.jsxs)("li",{className:"italic text-gray-600 bg-gray-50 p-1.5 border rounded text-[0.7rem]",children:["“",e,"”"]},s))})]})]})]})}):null},K=e=>{let{items:s}=e;if(!s||0===s.length)return null;let t=e=>{switch(e){case"Pull Request":return(0,r.jsx)(h.A,{className:"h-3.5 w-3.5 mr-1.5 text-blue-600 flex-shrink-0"});case"Issue":return(0,r.jsx)(f.A,{className:"h-3.5 w-3.5 mr-1.5 text-orange-600 flex-shrink-0"});case"Commit":return(0,r.jsx)(g.A,{className:"h-3.5 w-3.5 mr-1.5 text-gray-600 flex-shrink-0"});case"Discussion":return(0,r.jsx)(j.A,{className:"h-3.5 w-3.5 mr-1.5 text-purple-600 flex-shrink-0"});case"Documentation":return(0,r.jsx)(N.A,{className:"h-3.5 w-3.5 mr-1.5 text-indigo-600 flex-shrink-0"});default:return(0,r.jsx)(b.A,{className:"h-3.5 w-3.5 mr-1.5 text-gray-500 flex-shrink-0"})}},a=e=>{if(!e)return null;let s=e.toLowerCase();return s.includes("open")?(0,r.jsx)(y.A,{className:"h-3 w-3 ml-1 text-green-600"}):s.includes("closed")||s.includes("merged")||s.includes("done")?(0,r.jsx)(w.A,{className:"h-3 w-3 ml-1 text-purple-600"}):s.includes("progress")||s.includes("review")?(0,r.jsx)(v.A,{className:"h-3 w-3 ml-1 text-yellow-600"}):null};return(0,r.jsxs)(n.Zp,{className:"mt-4 shadow-sm",children:[(0,r.jsx)(n.aR,{className:"p-3",children:(0,r.jsxs)(n.ZB,{className:"text-base flex items-center",children:[(0,r.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Related Items"]})}),(0,r.jsx)(n.Wu,{className:"p-0",children:(0,r.jsxs)(c.XI,{className:"text-xs",children:[(0,r.jsx)(c.A0,{className:"bg-gray-50",children:(0,r.jsxs)(c.Hj,{children:[(0,r.jsx)(c.nd,{className:"w-[150px] px-3 py-2",children:"Type"}),(0,r.jsx)(c.nd,{className:"px-3 py-2",children:"Identifier"}),(0,r.jsx)(c.nd,{className:"px-3 py-2",children:"Relevance"}),(0,r.jsx)(c.nd,{className:"px-3 py-2",children:"Status"})]})}),(0,r.jsx)(c.BF,{children:s.map((e,s)=>(0,r.jsxs)(c.Hj,{className:"hover:bg-gray-50/50",children:[(0,r.jsxs)(c.nA,{className:"font-medium px-3 py-2 flex items-center",children:[t(e.type)," ",e.type]}),(0,r.jsx)(c.nA,{className:"px-3 py-2",children:(0,r.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center",children:[e.identifier," ",(0,r.jsx)(u.A,{className:"h-3 w-3 ml-1"})]})}),(0,r.jsx)(c.nA,{className:"px-3 py-2 text-gray-600",children:e.relevance||"-"}),(0,r.jsxs)(c.nA,{className:"px-3 py-2 flex items-center",children:[e.status||"-",a(e.status)]})]},s))})]})})]})},M=e=>{var s;let{cell:t,onDelete:i}=e;console.log("[InvestigationReportCell ".concat(t.id,"] Render with cell prop:"),t);let c=t.notebook_id,{sendSuggestedStepToChat:x,isSendingChatMessage:u,updateCell:p}=(0,$.F)(),h=a.useCallback(e=>{if(console.log("[InvestigationReportCell ".concat(t.id,"] WebSocket message received:"),e),"cell_update"===e.type&&e.payload){let{notebook_id:s,cell_id:r,...a}=e.payload;r===t.id&&s===c&&(console.log("[InvestigationReportCell ".concat(t.id,"] Received relevant cell update from WebSocket:"),a),Object.keys(a).length>0&&p(c,t.id,a))}},[t.id,c,p]),{sendMessage:g,status:j}=(0,W.h)(c||"",h),b=null===(s=t.result)||void 0===s?void 0:s.content,y="rerun_investigation_cell";return b?(0,r.jsxs)("div",{className:"border rounded-md overflow-hidden mb-3 mx-8 shadow-sm",children:[(0,r.jsxs)("div",{className:"bg-indigo-100 border-b border-indigo-200 p-3 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(N.A,{className:"h-4 w-4 mr-2 text-indigo-700 flex-shrink-0"}),(0,r.jsx)("span",{className:"font-medium text-sm text-indigo-800",children:b.title||"Investigation Report"})]}),(0,r.jsx)("div",{className:"flex items-center space-x-1.5",children:(0,r.jsxs)(o.Bc,{delayDuration:100,children:[(0,r.jsxs)(o.m_,{children:[(0,r.jsx)(o.k$,{asChild:!0,children:(0,r.jsx)(m.$,{size:"sm",variant:"ghost",className:"text-gray-500 hover:bg-indigo-100 hover:text-indigo-700 h-7 w-7 px-0",onClick:()=>{if(!t.notebook_id){console.error("Notebook ID is missing, cannot rerun cell:",t.id);return}let e=(0,O.A)(),s={notebook_id:t.notebook_id,cell_id:t.id,session_id:e};console.log("[InvestigationReportCell ".concat(t.id,"] Sending rerun message. Type: ").concat(y,", Payload:"),s),g(y,s),p(t.notebook_id,t.id,{status:"running"})},disabled:"running"===t.status||"queued"===t.status,children:(0,r.jsx)(k.A,{className:"h-4 w-4 ".concat("running"===t.status||"queued"===t.status?"animate-spin":"")})})}),(0,r.jsx)(o.ZI,{children:(0,r.jsx)("p",{children:"Re-run Investigation Report"})})]}),(0,r.jsxs)(o.m_,{children:[(0,r.jsx)(o.k$,{asChild:!0,children:(0,r.jsx)(m.$,{size:"sm",variant:"ghost",className:"text-gray-500 hover:bg-red-100 hover:text-red-700 h-7 w-7 px-0",onClick:()=>i(t.id),children:(0,r.jsx)(A.A,{className:"h-4 w-4"})})}),(0,r.jsx)(o.ZI,{children:(0,r.jsx)("p",{children:"Delete Report Cell"})})]})]})})]}),(0,r.jsxs)("div",{className:"p-4 bg-white",children:[b.error&&(0,r.jsxs)(d.Fc,{variant:"destructive",className:"mb-4",children:[(0,r.jsx)(f.A,{className:"h-4 w-4"}),(0,r.jsx)(d.XL,{children:"Report Generation Error"}),(0,r.jsx)(d.TN,{className:"text-xs",children:b.error})]}),(0,r.jsx)(n.Zp,{className:"mb-4 bg-white border shadow-none",children:(0,r.jsxs)(n.Wu,{className:"p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start flex-wrap gap-3",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-700 flex items-center",children:[(0,r.jsx)(R.A,{className:"h-4 w-4 mr-1.5 text-gray-500"}),"Original Query: ",(0,r.jsx)("span",{className:"ml-1 font-normal text-gray-900",children:b.query})]}),b.estimated_severity&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(C.A,{className:"h-4 w-4 text-gray-500"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Severity:"}),(e=>{switch(e){case"Critical":return(0,r.jsx)(l.E,{variant:"destructive",className:"bg-red-600 text-white",children:e});case"High":return(0,r.jsx)(l.E,{variant:"destructive",children:e});case"Medium":return(0,r.jsx)(l.E,{className:"bg-yellow-500 text-white",children:e});case"Low":return(0,r.jsx)(l.E,{variant:"secondary",children:e});default:return(0,r.jsx)(l.E,{variant:"outline",children:"Unknown Severity"})}})(b.estimated_severity)]})]}),b.status&&(0,r.jsxs)("p",{className:"text-xs text-gray-600 flex items-center",children:[(0,r.jsx)(I.A,{className:"h-3 w-3 mr-1.5 text-gray-400"}),"Status: ",(0,r.jsx)("span",{className:"ml-1 font-medium text-gray-800",children:b.status}),b.status_reason&&(0,r.jsxs)("span",{className:"ml-1 text-gray-500",children:["(",b.status_reason,")"]})]}),b.tags&&b.tags.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-1 pt-1",children:[(0,r.jsx)(S.A,{className:"h-3.5 w-3.5 mr-1 text-gray-400"}),b.tags.map((e,s)=>(0,r.jsx)(l.E,{variant:"secondary",className:"text-xs font-normal",children:e},s))]})]})}),(0,r.jsx)(X,{finding:b.issue_summary,title:"Issue Summary",defaultOpen:!0,icon:T.A}),(0,r.jsx)(X,{finding:b.root_cause,title:"Root Cause Analysis",confidence:b.root_cause_confidence,defaultOpen:!0,icon:Z.A}),b.key_components&&b.key_components.length>0&&(0,r.jsxs)(n.Zp,{className:"mt-4 shadow-sm",children:[(0,r.jsx)(n.aR,{className:"p-3",children:(0,r.jsxs)(n.ZB,{className:"text-base flex items-center",children:[(0,r.jsx)(E.A,{className:"h-4 w-4 mr-2"}),"Key Code Components"]})}),(0,r.jsx)(n.Wu,{className:"p-3 grid grid-cols-1 md:grid-cols-2 gap-4",children:b.key_components.map((e,s)=>(0,r.jsx)(P,{reference:e},s))})]}),(0,r.jsx)(K,{items:b.related_items}),b.proposed_fix&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(X,{finding:b.proposed_fix,title:"Proposed Fix / Solution",confidence:b.proposed_fix_confidence,icon:B.A})}),b.affected_context&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(X,{finding:b.affected_context,title:"Affected Context",icon:q.A})}),b.suggested_next_steps&&b.suggested_next_steps.length>0&&(0,r.jsxs)(n.Zp,{className:"mt-4 shadow-sm",children:[(0,r.jsx)(n.aR,{className:"p-3",children:(0,r.jsxs)(n.ZB,{className:"text-base flex items-center",children:[(0,r.jsx)(L.A,{className:"h-4 w-4 mr-2"}),"Suggested Next Steps"]})}),(0,r.jsx)(n.Wu,{className:"p-3",children:(0,r.jsx)("ul",{className:"list-none space-y-1.5 text-xs text-gray-700",children:b.suggested_next_steps.map((e,s)=>(0,r.jsx)("li",{children:(0,r.jsxs)("button",{onClick:()=>x(e),className:"flex items-center w-full text-left p-1.5 rounded hover:bg-indigo-50 hover:text-indigo-800 transition-all duration-150 cursor-pointer focus:outline-none focus:ring-1 focus:ring-indigo-300",disabled:u,children:[(0,r.jsx)(z.A,{className:"h-3.5 w-3.5 mr-1.5 text-indigo-400 flex-shrink-0"}),(0,r.jsx)("span",{className:"flex-1",children:e})]})},s))})})]})]})]}):(0,r.jsx)("div",{className:"border rounded-md overflow-hidden mb-3 mx-8 bg-yellow-50 border-yellow-200 p-3 text-xs text-yellow-800",children:(0,r.jsxs)("p",{children:[(0,r.jsx)(f.A,{className:"inline h-4 w-4 mr-1"})," Report data is missing, invalid, or not in the expected nested structure (result.content) for this cell."]})})}},83994:(e,s,t)=>{t.d(s,{A0:()=>i,BF:()=>c,Hj:()=>d,XI:()=>l,nA:()=>m,nd:()=>o});var r=t(90702),a=t(16606),n=t(79321);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",t),...a})})});l.displayName="Table";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",t),...a})});i.displayName="TableHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",t),...a})});c.displayName="TableBody",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a})}).displayName="TableFooter";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a})});d.displayName="TableRow";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a})});o.displayName="TableHead";let m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a})});m.displayName="TableCell",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",t),...a})}).displayName="TableCaption"}}]);